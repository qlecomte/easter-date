const chai = require('chai');
chai.use(require('chai-datetime'))
const expect = chai.expect;

const easter = require('./index');

describe('Gregorian Calendar', function(){
	it('should compute Easter', function(){
		expect(easter(2018)).to.be.equalDate(new Date("2018-04-01"));
	});

	it('should compute Easter as a date', function(){
		expect(easter(2018, false)).to.be.equalDate(new Date("2018-04-01"));
	});

	it('should compute Easter as a string', function(){
		expect(easter(2018, true)).to.be.equal("2018-04-01");
	});

	it('should compute Easter from a date', function(){
		expect(easter(new Date("2018-02-03"))).to.be.equalDate(new Date("2018-04-01"));
		expect(easter(new Date("2018-04-01"))).to.be.equalDate(new Date("2018-04-01"));
		expect(easter(new Date("2018-08-14"))).to.be.equalDate(new Date("2018-04-01"));
	});

	it ('should compute lots of Gregorian dates', function(){
		var dates = [
			'1583-04-10',
			'1584-04-01',
			'1585-04-21',
			'1586-04-06',
			'1587-03-29',
			'1588-04-17',
			'1589-04-02',
			'1590-04-22',
			'1970-03-29',
			'1971-04-11',
			'1972-04-02',
			'1973-04-22',
			'1974-04-14',
			'1975-03-30',
			'1976-04-18',
			'1977-04-10',
			'1978-03-26',
			'1979-04-15',
			'1980-04-06',
			'1981-04-19',
			'1982-04-11',
			'1983-04-03',
			'1984-04-22',
			'1985-04-07',
			'1986-03-30',
			'1987-04-19',
			'1988-04-03',
			'1989-03-26',
			'1990-04-15',
			'1991-03-31',
			'1992-04-19',
			'1993-04-11',
			'1994-04-03',
			'1995-04-16',
			'1996-04-07',
			'1997-03-30',
			'1998-04-12',
			'1999-04-04',
			'2000-04-23',
			'2001-04-15',
			'2002-03-31',
			'2003-04-20',
			'2004-04-11',
			'2005-03-27',
			'2006-04-16',
			'2007-04-08',
			'2008-03-23',
			'2009-04-12',
			'2010-04-04',
			'2011-04-24',
			'2012-04-08',
			'2013-03-31',
			'2014-04-20',
			'2015-04-05',
			'2016-03-27',
			'2017-04-16',
			'2018-04-01',
			'2019-04-21',
			'2020-04-12',
			'2021-04-04',
			'2022-04-17',
			'2023-04-09',
			'2024-03-31',
			'2025-04-20',
			'2026-04-05',
			'2027-03-28',
			'2028-04-16',
			'2029-04-01',
			'2030-04-21',
			'2031-04-13',
			'2032-03-28',
			'2033-04-17',
			'2034-04-09',
			'2035-03-25',
			'2036-04-13',
			'2037-04-05',
			'2038-04-25',
			'2039-04-10',
			'2040-04-01',
			'2041-04-21',
			'2042-04-06',
			'2043-03-29',
			'2044-04-17',
			'2045-04-09',
			'2046-03-25',
			'2047-04-14',
			'2048-04-05',
			'2049-04-18',
			'2050-04-10',
			'2051-04-02',
			'2052-04-21',
			'2053-04-06',
			'2054-03-29',
			'2055-04-18',
			'2056-04-02',
			'2057-04-22',
			'2058-04-14',
			'2059-03-30',
			'2060-04-18',
			'2061-04-10',
			'2062-03-26',
			'2063-04-15',
			'2064-04-06',
			'2065-03-29',
			'2066-04-11',
			'2067-04-03',
			'2068-04-22',
			'2069-04-14',
			'2070-03-30',
			'2071-04-19',
			'2072-04-10',
			'2073-03-26',
			'2074-04-15',
			'2075-04-07',
			'2076-04-19',
			'2077-04-11',
			'2078-04-03',
			'2079-04-23',
			'2080-04-07',
			'2081-03-30',
			'2082-04-19',
			'2083-04-04',
			'2084-03-26',
			'2085-04-15',
			'2086-03-31',
			'2087-04-20',
			'2088-04-11',
			'2089-04-03',
			'2090-04-16',
			'2091-04-08',
			'2092-03-30',
			'2093-04-12',
			'2094-04-04',
			'2095-04-24',
			'2096-04-15',
			'2097-03-31',
			'2098-04-20',
			'2099-04-12',
			'2100-03-28'
		];

		for (var date of dates){
			const year = new Date(date).getFullYear();

			expect(easter(year, true)).to.be.equal(date);
		}
	})

	it ('should compute lots of Julian dates', function(){
		const dates = [
			"1000-03-31",
			"1001-04-13",
			"1002-04-05",
			"1003-03-28",
			"1004-04-16",
			"1005-04-01",
			"1006-04-21",
			"1007-04-06",
			"1008-03-28",
			"1009-04-17",
			"1010-04-09",
			"1011-03-25",
			"1012-04-13",
			"1013-04-05",
			"1014-04-25",
			"1015-04-10",
			"1016-04-01",
			"1017-04-21",
			"1018-04-06",
			"1019-03-29",
			"1020-04-17",
			"1021-04-02",
			"1022-03-25",
			"1023-04-14",
			"1024-04-05",
			"1025-04-18",
			"1026-04-10",
			"1027-03-26",
			"1028-04-14",
			"1029-04-06",
			"1030-03-29",
			"1031-04-11",
			"1032-04-02",
			"1033-04-22",
			"1034-04-14",
			"1035-03-30",
			"1036-04-18",
			"1037-04-10",
			"1038-03-26",
			"1039-04-15",
			"1040-04-06",
			"1041-03-22",
			"1042-04-11",
			"1043-04-03",
			"1044-04-22",
			"1045-04-07",
			"1046-03-30",
			"1047-04-19",
			"1048-04-03",
			"1049-03-26",
			"1050-04-15",
			"1051-03-31",
			"1052-04-19",
			"1053-04-11",
			"1054-04-03",
			"1055-04-16",
			"1056-04-07",
			"1057-03-30",
			"1316-04-11",
			"1317-04-03",
			"1318-04-23",
			"1319-04-08",
			"1320-03-30",
			"1321-04-19",
			"1322-04-11",
			"1323-03-27",
			"1324-04-15",
			"1325-04-07",
			"1326-03-23",
			"1327-04-12",
			"1328-04-03",
			"1329-04-23",
			"1330-04-08",
			"1331-03-31",
			"1332-04-19",
			"1333-04-04",
			"1568-04-18",
			"1569-04-10",
			"1570-03-26",
			"1571-04-15",
			"1572-04-06",
			"1573-03-22",
			"1574-04-11",
			"1575-04-03",
			"1576-04-22",
			"1577-04-07",
			"1578-03-30",
			"1579-04-19",
			"1580-04-03",
			"1581-03-26",
			"1582-04-15",
		];

		for (var date of dates){
			const year = new Date(date).getFullYear();

			expect(easter(year, true)).to.be.equal(date);
		}
	})
});